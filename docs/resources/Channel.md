# Channels Resource

## Channel Objects

### Guild Channel Object

Guild channels represent an isolated set of users and messages within a Guild.

###### Guild Channel Structure

| Field | Type | Description | Present |
|-------|------|-------------|---------|
| id | snowflake | the id of this channel (will be equal to the guild if it's the "general" channel) | Always|
| guild\_id | snowflake | the id of the guild | Always |
| name | string | the name of the channel (2-100 characters) | Always |
| type | string | "text" or "voice" | Always |
| position | integer | sorting position of the channel | Always |
| is\_private | bool | should always be false for guild channels | Always |
| permission\_overwrites | array | an array of [overwrite](#DOCS_CHANNEL/overwrite-object) objects | Always |
| topic | string | the channel topic (0-1024 characters) | Text only |
| last\_message\_id | snowflake | the id of the last message sent in this channel | Text only |
| bitrate | integer | the bitrate (in bits) of the voice channel | Voice only |
| user\_limit | integer | the user limit of the voice channel | Voice only |

###### Example Text Channel

```json
{
	"id": "41771983423143937",
	"guild_id": "41771983423143937",
	"name": "general",
	"type": "text",
	"position": 6,
	"is_private": false,
	"permission_overwrites": [],
	"topic": "24/7 chat about how to gank Mike #2",
	"last_message_id": "155117677105512449"
}
```

###### Example Voice Channel

```json
{
	"id": "155101607195836416",
	"guild_id": "41771983423143937",
	"name": "ROCKET CHEESE",
	"type": "voice",
	"position": 5,
	"is_private": false,
	"permission_overwrites": [],
	"bitrate": 64000,
	"user_limit": 0
}
```

### DM Channel Object

DM Channels represent a one-to-one conversation between two users, outside of the scope of guilds.

###### DM Channel Structure

| Field | Type | Description |
|-------|------|-------------|
| id | snowflake | the id of this private message |
| is\_private | bool | should always be true for DM channels |
| recipient | object | the [user object](#DOCS_USER/user-object) of the DM recipient |
| last\_message\_id | snowflake | the id of the last message sent in this DM |

###### Example DM Channel

```json
{
	"id": "134552934997426176",
	"is_private": true,
	"recipient": {},
	"last_message_id": "153642275539255296"
}
```

### Message Object

Represents a message sent in a channel within Discord.

###### Message Structure

| Field | Type | Description |
|-------|------|-------------|
| id | snowflake | id of the message |
| channel\_id | snowflake | id of the channel the message was sent in |
| author* | a [user](#DOCS_USER/user-object) object | the author of this message (not guaranteed to be a valid user, see below) |
| content | string | contents of the message |
| timestamp | timestamp | when this message was sent |
| edited\_timestamp | ?timestamp | when this message was edited (or null if never) |
| tts | bool | whether this was a TTS message |
| mention\_everyone | bool | whether this message mentions everyone |
| mentions | array of [user objects](#DOCS_USER/user-object) | users specifically mentioned in the message |
| mention\_roles | array of [role object](#DOCS_PERMISSIONS/role-object) ids | roles specifically mentioned in this message |
| attachments | array of [attachment objects](#DOC_CHANNEL/attachment-object) | any attached files |
| embeds | array of [embed objects](#DOC_CHANNEL/embed-object) | any embedded content |
| reactions | array of [reaction objects](#DOCS_CHANNEL/reaction-object) | reactions to the message |
| nonce | ?snowflake | used for validating a message was sent |
| pinned | bool | whether this message is pinned |
| webhook\_id | string | if the message is generated by a webhook, this is the webhook's id |

* The author object follows the structure of the user object, but is only a valid user in the case where the message is generated by a user or bot user. If the message is generated by a webhook, the author object corresponds to the webhook's id, username, and avatar. You can tell if a message is generated by a webhook by checking for the `webhook_id` on the message object.

###### Example Message

```json
{
	"id": "162701077035089920",
	"channel_id": "131391742183342080",
	"author": {},
	"content": "Hey guys!",
	"timestamp": "2016-03-24T23:15:59.605000+00:00",
	"edited_timestamp": null,
	"tts": false,
	"mention_everyone": false,
	"mentions": [],
	"mention_roles": [],
	"attachments": [],
	"embeds": [],
	"reactions": []
}
```

### Reaction Object

###### Reaction Structure

| Field | Type | Description |
|-------|------|-------------|
| count | integer | times this emoji has been used to react |
| me | bool | whether the current user reacted using this emoji |
| emoji | [emoji object](#DOCS_CHANNEL/emoji-structure) | emoji information |

###### Emoji Structure

| Field | Type | Description |
|-------|------|-------------|
| id | ?snowflake | id of emoji (if custom emoji) |
| name | string | name of emoji |

### Overwrite Object

###### Overwrite Structure

| Field | Type | Description |
|-------|------|-------------|
| id | snowflake | role or user id |
| type | string | either "role" or "member" |
| allow | integer | permission bit set |
| deny | integer | permission bit set |

### Embed Object

###### Embed Structure

| Field | Type | Description |
|-------|------|-------------|
| title | string | title of embed |
| type | string | type of embed (always "rich" for webhook embeds) |
| description | string | description of embed |
| url | string | url of embed |
| timestamp | date | timestamp of embed content |
| color | integer | color code of the embed |
| footer | [embed footer object](#DOCS_CHANNEL/embed-footer-structure) | footer information
| image | [embed image object](#DOCS_CHANNEL/embed-image-structure) | image information
| thumbnail | [embed thumbnail object](#DOCS_CHANNEL/embed-thumbnail-structure) | thumbnail information |
| video | [embed video object](#DOCS_CHANNEL/embed-video-structure) | video information |
| provider | [embed provider object](#DOCS_CHANNEL/embed-provider-structure) | provider information |
| author | [embed author object](#DOCS_CHANNEL/embed-author-structure) | author information |
| fields | array of [embed field objects](#DOCS_CHANNEL/embed-field-structure) | fields information |

###### Embed Thumbnail Structure

| Field | Type | Description |
|-------|------|-------------|
| url | string | source url of thumbnail (only supports http(s) and attachments) |
| proxy_url | string | a proxied url of the thumbnail |
| height | integer | height of thumbnail |
| width | integer | width of thumbnail |

###### Embed Video Structure

| Field | Type | Description |
|-------|------|-------------|
| url | string | source url of video |
| height | integer | height of video |
| width | integer | width of video |

###### Embed Image Structure

| Field | Type | Description |
|-------|------|-------------|
| url | string | source url of image (only supports http(s) and attachments) |
| proxy_url | string | a proxied url of the image |
| height | integer | height of image |
| width | integer | width of image |

###### Embed Provider Structure

| Field | Type | Description |
|-------|------|-------------|
| name | string | name of provider |
| url | string | url of provider |

###### Embed Author Structure

| Field | Type | Description |
|-------|------|-------------|
| name | string | name of author |
| url | string | url of author |
| icon_url | string | url of author icon (only supports http(s) and attachments) |
| proxy_icon_url | string | a proxied url of author icon |

###### Embed Footer Structure

| Field | Type | Description |
|-------|------|-------------|
| text | string | footer text |
| icon_url | string | url of footer icon (only supports http(s) and attachments) |
| proxy_icon_url | string | a proxied url of footer icon |

###### Embed Field Structure

| Field | Type | Description |
|-------|------|-------------|
| name | string | name of the field |
| value | string | value of the field |
| inline | bool | whether or not this field should display inline |

### Attachment Object

###### Attachment Structure

| Field | Type | Description |
|-------|------|-------------|
| id | snowflake | attachment id |
| filename | string | name of file attached |
| size | integer | size of file in bytes |
| url | string | source url of file |
| proxy_url | string | a proxied url of file |
| height | ?integer | height of file (if image) |
| width | ?integer | width of file (if image) |

## Message Formatting

Discord utilizes a subset of markdown for rendering message content on its clients, while also adding some custom functionality to enable things like mentioning users and channels. This functionality uses the following formats:

###### Formats

| Type | Structure | Example |
|---------|-------------|-------------|
| User | `<@USER_SNOWFLAKE_ID>` | `<@80351110224678912>` |
| User (Nickname) | `<@!USER_SNOWFLAKE_ID>` | `<@!80351110224678912>` |
| Channel | `<#CHANNEL_SNOWFLAKE_ID>` | `<#103735883630395392>` |
| Role | `<@&ROLE_SNOWFLAKE_ID>` | `<@&165511591545143296>` |
| Custom Emoji | `<:NAME:ID>` | `<:mmLol:216154654256398347>` |

Using the markdown for either users, roles or channels will mention the target(s) accordingly.

## Get Channel % GET /channels/{channel.id#DOCS_CHANNEL/channel-objects}

Get a channel by ID. Returns a [guild channel](#DOCS_CHANNEL/guild-channel-object) or [dm channel](#DOCS_CHANNEL/dm-channel-object) object.

## Modify Channel % PUT/PATCH /channels/{channel.id#DOCS_CHANNEL/guild-channel-object}

Update a channels settings. Requires the 'MANAGE_GUILD' permission for the guild. Returns a [guild channel](#DOCS_CHANNEL/guild-channel-object) on success, and a 400 BAD REQUEST on invalid parameters. Fires a [Channel Update](#DOCS_GATEWAY/channel-update) Gateway event. For the **PATCH** method, all the JSON Params are optional.

###### JSON Params

| Field | Type | Description | Channel Type |
|-------|------|-------------|--------------|
| name | string | 2-100 character channel name | Both |
| position | integer | the position of the channel in the left-hand listing | Both |
| topic | string | 0-1024 character channel topic | Text |
| bitrate | integer | the bitrate (in bits) of the voice channel; 8000 to 96000 (128000 for VIP servers) | Voice |
| user_limit | integer | the user limit of the voice channel; 0 refers to no limit, 1 to 99 refers to a user limit | Voice |

## Delete/Close Channel % DELETE /channels/{channel.id#DOCS_CHANNEL/channel-objects}

Delete a guild channel, or close a private message. Requires the 'MANAGE_CHANNELS' permission for the guild. Returns a [guild channel](#DOCS_CHANNEL/guild-channel-object) or [dm channel](#DOCS_CHANNEL/dm-channel-object) object on success. Fires a [Channel Delete](#DOCS_GATEWAY/channel-delete) Gateway event.

>warn
> Deleting a guild channel cannot be undone. Use this with caution, as it is impossible to undo this action when performed on a guild channel. In contrast, when used with a private message, it is possible to undo the action by opening a private message with the recipient again.

## Get Channel Messages % GET /channels/{channel.id#DOCS_CHANNEL/channel-objects}/messages

Returns the messages for a channel. If operating on a guild channel, this endpoint requires the 'READ_MESSAGES' permission to be present on the current user. Returns an array of [message](#DOCS_CHANNEL/message-object) objects on success.

>info
> The before, after, and around keys are mutually exclusive, only one may be passed at a time.

###### Query String Params

| Field | Type | Description | Required | Default |
|-------|------|-------------|----------|---------|
| around | snowflake | get messages around this message ID | false | absent |
| before | snowflake | get messages before this message ID | false | absent |
| after | snowflake | get messages after this message ID | false | absent |
| limit | integer | max number of messages to return (1-100) | false | 50 |

## Get Channel Message % GET /channels/{channel.id#DOCS_CHANNEL/channel-objects}/messages/{message.id#DOCS_CHANNEL/message-object}

Returns a specific message in the channel. If operating on a guild channel, this endpoints requires the 'READ_MESSAGE_HISTORY' permission to be present on the current user. Returns a [message](#DOCS_CHANNEL/message-object) object on success.

## Create Message % POST /channels/{channel.id#DOCS_CHANNEL/channel-objects}/messages

Post a message to a guild text or DM channel. If operating on a guild channel, this endpoint requires the 'SEND_MESSAGES' permission to be present on the current user. Returns a [message](#DOCS_CHANNEL/message-object) object. Fires a [Message Create](#DOCS_GATEWAY/message-create) Gateway event. See [message formatting](#DOCS_CHANNEL/message-formatting) for more information on how to properly format messages.

>warn
> This endpoint supports both JSON and form data bodies. It does require multipart/form-data requests instead of the normal JSON request type when uploading files. Make sure you set your `Content-Type` to `multipart/form-data` if you're doing that. Note that in that case, the `embed` field cannot be used, but you can pass an url-encoded JSON body as a form value for `payload_json`.

###### JSON Params

| Field | Type | Description | Required |
|-------|------|-------------|----------|
| content | string | the message contents (up to 2000 characters) | true |
| nonce | snowflake | a nonce that can be used for optimistic message sending | false |
| tts | bool | true if this is a TTS message | false |
| file | file contents | the contents of the file being sent | one of content, file, embeds (multipart form data only) |
| embed | [embed](#DOCS_CHANNEL/embed-object) object | embedded `rich` content | false |

>info
> For the embed object, you can set every field except `type` (it will be `rich` regardless of if you try to set it), `provider`, `video`, and any `height`, `width`, or `proxy_url` values for images.

###### Using Attachments within Embeds

You can upload attachments when creating a message and use those attachments within your embed. To do this, you will want to upload files as part of your `multipart/form-data` body. Make sure that you're uploading files that contain a filename, as you will need a filename to reference against.

In the embed object, you can then set an image to use an attachment as its url with our attachment scheme syntax: `attachment://filename.png`

For example:

```json
{
	"embed": {
		"image": {
			"url": "attachment://screenshot.png"
		}
	}
}
```

>warn
> Only filenames with proper image extensions are supported for the time being.

## Create Reaction % PUT /channels/{channel.id#DOCS_CHANNEL/channel-objects}/messages/{message.id#DOCS_CHANNEL/message-object}/reactions/{emoji#DOCS_CHANNEL/emoji-structure}/@me

Create a reaction for the message. If nobody else has reacted to the message using this emoji, this endpoint requires the 'ADD\_REACTIONS' permission to be present on the current user. Returns a 204 empty response on success.

## Delete Own Reaction % DELETE /channels/{channel.id#DOCS_CHANNEL/channel-objects}/messages/{message.id#DOCS_CHANNEL/message-object}/reactions/{emoji#DOCS_CHANNEL/emoji-structure}/@me

Delete a reaction the current user has made for the message. Returns a 204 empty response on success.

## Delete User Reaction % DELETE /channels/{channel.id#DOCS_CHANNEL/channel-objects}/messages/{message.id#DOCS_CHANNEL/message-object}/reactions/{emoji#DOCS_CHANNEL/emoji-structure}/{user.id#DOCS_USER/user-object}

Deletes another user's reaction. This endpoint requires the 'MANAGE\_MESSAGES' permission to be present on the current user. Returns a 204 empty response on success.

## Get Reactions % GET /channels/{channel.id#DOCS_CHANNEL/channel-objects}/messages/{message.id#DOCS_CHANNEL/message-object}/reactions/{emoji#DOCS_CHANNEL/emoji-structure}

Get a list of users that reacted with this emoji. Returns an array of [user](#DOCS_USER/user-object) objects on success.

## Delete All Reactions % DELETE /channels/{channel.id#DOCS_CHANNEL/channel-objects}/messages/{message.id#DOCS_CHANNEL/message-object}/reactions

Deletes all reactions on a message. This endpoint requires the 'MANAGE\_MESSAGES' permission to be present on the current user.

## Edit Message % PATCH /channels/{channel.id#DOCS_CHANNEL/channel-objects}/messages/{message.id#DOCS_CHANNEL/message-object}

Edit a previously sent message. You can only edit messages that have been sent by the current user. Returns a [message](#DOCS_CHANNEL/message-object) object. Fires a [Message Update](#DOCS_GATEWAY/message-update) Gateway event.

###### JSON Params

| Field | Type | Description |
|-------|------|-------------|
| content | string | the new message contents |

## Delete Message % DELETE /channels/{channel.id#DOCS_CHANNEL/channel-objects}/messages/{message.id#DOCS_CHANNEL/message-object}

Delete a message. If operating on a guild channel and trying to delete a message that was not sent by the current user, this endpoint requires the 'MANAGE_MESSAGES' permission. Returns a 204 empty response on success. Fires a [Message Delete](#DOCS_GATEWAY/message-delete) Gateway event.

## Bulk Delete Messages % POST /channels/{channel.id#DOCS_CHANNEL/channel-objects}/messages/bulk-delete

Delete multiple messages in a single request. This endpoint can only be used on guild channels and requires the 'MANAGE_MESSAGES' permission. Returns a 204 empty response on success. Fires multiple [Message Delete](#DOCS_GATEWAY/message-delete) Gateway events.

The gateway will ignore any individual messages that do not exist or do not belong to this channel, but these will count towards the minimum and maximum message count. Duplicate snowflakes will only be counted once for these limits.

> warn
> This endpoint will not delete messages older than 2 weeks, and will fail if any message provided is older than that.
> An endpoint will be added in the future to prune messages older than 2 weeks from a channel.

###### JSON Params

| Field | Type | Description |
|-------|------|-------------|
| messages | array of snowflakes | an array of message ids to delete |

## Bulk Delete Messages (deprecated) % POST /channels/{channel.id#DOCS_CHANNEL/channel-objects}/messages/bulk_delete

Same as above, but this endpoint is deprecated.

## Edit Channel Permissions % PUT /channels/{channel.id#DOCS_CHANNEL/guild-channel-object}/permissions/{overwrite.id}

Edit the channel permission overwrites for a user or role in a channel. Only usable for guild channels. Requires the 'MANAGE_ROLES' permission. Returns a 204 empty response on success. For more information about permissions, see [permissions](#DOCS_PERMISSIONS/permissions).

###### JSON Params

| Field | Type | Description |
|-------|------|-------------|
| allow | integer | the bitwise value of all allowed permissions |
| deny | integer | the bitwise value of all disallowed permissions |
| type | string | "member" for a user or "role" for a role |

## Get Channel Invites % GET /channels/{channel.id#DOCS_CHANNEL/guild-channel-object}/invites

Returns a list of [invite](#DOCS_INVITE/invite-object) objects (with [invite metadata](#DOCS_INVITE/invite-metadata-object)) for the channel. Only usable for guild channels. Requires the 'MANAGE_CHANNELS' permission.

## Create Channel Invite % POST /channels/{channel.id#DOCS_CHANNEL/guild-channel-object}/invites

Create a new [invite](#DOCS_INVITE/invite-object) object for the channel. Only usable for guild channels. Requires the `CREATE_INSTANT_INVITE` permission. All JSON paramaters for this route are optional, however the request body is not. If you are not sending any fields, you still have to send an empty JSON object (`{}`). Returns an [invite](#DOCS_INVITE/invite-object) object.

###### JSON Params

| Field | Type | Description | Default |
|-------|------|-------------|----------|
| max_age | integer | duration of invite in seconds before expiry, or 0 for never | 86400 (24 hours) |
| max_uses | integer | max number of uses or 0 for unlimited | 0 |
| temporary | bool | whether this invite only grants temporary membership | false |
| unique | bool | if true, don't try to reuse a similar invite (useful for creating many unique one time use invites) | false |

## Delete Channel Permission % DELETE /channels/{channel.id#DOCS_CHANNEL/guild-channel-object}/permissions/{overwrite.id#DOCS_CHANNEL/overwrite-object}

Delete a channel permission overwrite for a user or role in a channel. Only usable for guild channels. Requires the 'MANAGE_ROLES' permission. Returns a 204 empty response on success. For more information about permissions, see [permissions](#DOCS_PERMISSIONS/permissions)

## Trigger Typing Indicator % POST /channels/{channel.id#DOCS_CHANNEL/channel-objects}/typing

Post a typing indicator for the specified channel. Generally bots should **not** implement this route. However, if a bot is responding to a command and expects the computation to take a few seconds, this endpoint may be called to let the user know that the bot is processing their message. Returns a 204 empty response on success. Fires a [Typing Start](#DOCS_GATEWAY/typing-start) Gateway event.

## Get Pinned Messages % GET /channels/{channel.id#DOCS_CHANNEL/channel-objects}/pins

Returns all pinned messages in the channel as an array of [message](#DOCS_CHANNEL/message-object) objects.

## Add Pinned Channel Message % PUT /channels/{channel.id#DOCS_CHANNEL/channel-objects}/pins/{message.id#DOCS_CHANNEL/message-object}

Pin a message in a channel. Requires the 'MANAGE_MESSAGES' permission. Returns a 204 empty response on success.

## Delete Pinned Channel Message % DELETE /channels/{channel.id#DOCS_CHANNEL/channel-objects}/pins/{message.id#DOCS_CHANNEL/message-object}

Delete a pinned message in a channel. Requires the 'MANAGE_MESSAGES' permission. Returns a 204 empty response on success.

## Group DM Add Recipient % PUT /channels/{channel.id#DOCS_CHANNEL/channel-objects}/recipients/{user.id#DOCS_USER/user-object}

Adds a recipient to a Group DM using their access token

###### JSON Params

| Field | Type | Description |
|-------|------|-------------|
| access_token | string | access token of a user that has granted your app the `gdm.join` scope |
| nick | string | nickname of the user being added |

## Group DM Remove Recipient % DELETE /channels/{channel.id#DOCS_CHANNEL/channel-objects}/recipients/{user.id#DOCS_USER/user-object}

Removes a recipient from a Group DM

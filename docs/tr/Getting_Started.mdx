<LocalePicker currentLocale="tr" />

# Ä°lk Discord uygulamanÄ± oluÅŸturmak

Discord uygulamalarÄ±, bir dizi API ve etkileÅŸimli Ã¶zellik kullanarak sunucularÄ±nÄ± Ã¶zelleÅŸtirmene ve geniÅŸletmene olanak tanÄ±r. Bu rehber, JavaScript kullanarak ilk Discord uygulamanÄ± oluÅŸturmanda sana yol gÃ¶sterecek ve rehberin sonunda eÄŸik Ã§izgi komutlarÄ±nÄ± kullanan, mesaj gÃ¶nderen ve bileÅŸen etkileÅŸimlerine yanÄ±t veren bir uygulamaya sahip olacaksÄ±n.

Sunucu Ã¼yelerinin taÅŸ, kÃ¢ÄŸÄ±t, makas oynayabilmelerini saÄŸlayacak bir Discord uygulamasÄ± oluÅŸturacaÄŸÄ±z (klasik 3 seÃ§enek yerine 7 seÃ§enek olacak). Bu kÄ±lavuz yeni baÅŸlayanlara yÃ¶neliktir ancak temel bir [JavaScript](https://developer.mozilla.org/en-US/docs/Learn/Getting_started_with_the_web/JavaScript_basics) bilginin olduÄŸunu varsayar.

<Collapsible title="Ne oluÅŸturuyoruz?" icon="view">
Uygulama bittiÄŸinde iÅŸte bÃ¶yle gÃ¶zÃ¼kecek:

![UygulamanÄ±n Ã¶rnek gÃ¶sterimi](getting-started-demo.gif)

KullanÄ±cÄ± akÄ±ÅŸÄ±nÄ± biraz daha aÃ§Ä±k hÃ¢le getirmek adÄ±na:

1. Ä°lk KullanÄ±cÄ± yeni bir oyun baÅŸlatÄ±r ve uygulamanÄ±n `/challenge` eÄŸik Ã§izgi komutunu kullanarak nesnesini seÃ§er
2. Kanala, diÄŸer kullanÄ±cÄ±larÄ±n meydan okumayÄ± kabul etmesini saÄŸlayan bir buton iÃ§eren bir mesaj gÃ¶nderilir
3. Ä°kinci kullanÄ±cÄ± **Kabul Et** butonuna tÄ±klar
4. Ä°kinci kullanÄ±cÄ±, nesnesini seÃ§ebileceÄŸi geÃ§ici bir mesaj alÄ±r
5. Oyunun sonucu herkesin gÃ¶rebilmesi iÃ§in orijinal kanalda paylaÅŸÄ±lÄ±r
</Collapsible>

<Collapsible title="Bu rehberde kullanÄ±lan kaynaklar" description="KullanacaÄŸÄ±mÄ±z teknolojilere ve araÃ§lara genel bakÄ±ÅŸ" icon="list">
- Bu kÄ±lavuzdaki kodun yanÄ± sÄ±ra bazÄ± ek Ã¶zelliklere Ã¶zgÃ¼ kod Ã¶rneklerinin bulunduÄŸu **[GitHub deposu](https://github.com/discord/discord-example-app)**.
- Discord uygulamalarÄ± iÃ§in tipler ve yardÄ±mcÄ± fonksiyonlar saÄŸlayan **[discord-interactions](https://github.com/discord/discord-interactions-js)** kitaplÄ±ÄŸÄ±.
- Discord'un bize istek gÃ¶nderebileceÄŸi bir sunucu oluÅŸturmak iÃ§in kullanacaÄŸÄ±mÄ±z popÃ¼ler bir JavaScript web Ã§erÃ§evesi olan **[Express](https://expressjs.com)**.
- Erken prototip ve geliÅŸtirme aÅŸamalarÄ±nda uygulamalarÄ± oluÅŸturma ve barÄ±ndÄ±rma iÅŸlemlerini basitleÅŸtiren bir Ã§evrim iÃ§i ortam olan **[Glitch](https://glitch.com/)**. Ä°stersen **[ngrok](https://ngrok.com/)** gibi bir araÃ§la yerel ortamÄ±nda da geliÅŸtirebilirsin.
</Collapsible>

---

## AdÄ±m 1: Bir uygulama oluÅŸturmak

Ã–ncelikle, eÄŸer hÃ¢lihazÄ±rda bir uygulaman yoksa geliÅŸtirici portalÄ±nda bir uygulama oluÅŸturman gerekli:

<Button href="https://discord.com/developers/applications?new_application=true" color="brand">Uygulama OluÅŸtur</Button>

UygulamanÄ±n ismini yaz ve **OluÅŸtur** butonuna bas.

UygulamanÄ± oluÅŸturduktan sonra uygulamanla ilgili aÃ§Ä±klama ve simge gibi temel bilgileri gÃ¼ncelleyebileceÄŸin uygulama ayarlarÄ±nÄ±n **Genel BakÄ±ÅŸ** sayfasÄ±na ulaÅŸacaksÄ±n. AyrÄ±ca rehberin ilerleyen bÃ¶lÃ¼mlerinde kullanacaÄŸÄ±mÄ±z bir **Uygulama KimliÄŸi** ve **EtkileÅŸim BitiÅŸ NoktasÄ± URL**'si de gÃ¶receksin.

### Botunu yapÄ±landÄ±rmak

Åimdiyse uygulamanÄ±n [bot kullanÄ±cÄ±sÄ±nÄ±](#DOCS_TOPICS_OAUTH2/bot-vs-user-accounts) yapÄ±landÄ±rarak onun da tÄ±pkÄ± diÄŸer sunucu Ã¼yeleri gibi gÃ¶rÃ¼nmesini ve hareket etmesini saÄŸlayacaÄŸÄ±z.

Sol taraftaki kenar Ã§ubuÄŸunda **Bot**'a tÄ±kla. Bu sayfada botun [ayrÄ±calÄ±klÄ± amaÃ§larÄ±nÄ±](#DOCS_TOPICS_GATEWAY/privileged-intents) veya diÄŸer kullanÄ±cÄ±lar tarafÄ±ndan yÃ¼klenip yÃ¼klenemeyeceÄŸi gibi ayarlarÄ± yapÄ±landÄ±rabilirsin.

<Collapsible title="AmaÃ§ nedir?" description="Standart ve ayrÄ±calÄ±klÄ± amaÃ§lara giriÅŸ" icon="question">
AmaÃ§lar, bir [AÄŸ GeÃ§idi API baÄŸlantÄ±sÄ±](#DOCS_TOPICS_GATEWAY) oluÅŸtururken Discord'un uygulamana hangi olaylarÄ± gÃ¶ndereceÄŸini belirler. Ã–rneÄŸin, kullanÄ±cÄ±lar bir mesaja tepki eklediÄŸinde uygulamanÄ±n bir ÅŸey yapmasÄ±nÄ± istiyorsan `GUILD_MESSAGE_REACTIONS` (`1 << 10`) amacÄ±nÄ± gÃ¶nderebilirsin.

BazÄ± amaÃ§lar [privileged'tir](#DOCS_TOPICS_GATEWAY/privileged-intents), yani uygulamanÄ±n hassas olarak kabul edilebilecek verilere (mesajlarÄ±n iÃ§eriÄŸi gibi) eriÅŸmesine izin verir. Privileged intent'ler uygulamanÄ±n ayarlarÄ±ndaki **Bot** sayfasÄ±nda gÃ¶rÃ¼nÃ¼r ve aÃ§Ä±lÄ±p kapatÄ±labilir. Standart, privileged intent dÄ±ÅŸÄ±ndakiler herhangi bir ek izin veya yapÄ±landÄ±rma gerektirmez.

AmaÃ§lar hakkÄ±nda daha fazla bilgi ve mevcut amaÃ§larÄ±n tam listesi, iliÅŸkili olaylarÄ±yla birlikte [AÄŸ GeÃ§idi dokÃ¼mantasyonunda](#DOCS_TOPICS_GATEWAY/gateway-intents) bulunmaktadÄ±r.
</Collapsible>

![Ayarlardaki bot sekmesi](app-add-bot.png)

**Bot** sayfasÄ±nda, botunun token'Ä±nÄ± kopyalamana ve sÄ±fÄ±rlamana olanak tanÄ±yan bir **Token** bÃ¶lÃ¼mÃ¼ de vardÄ±r.

Bot token'larÄ±, API isteklerini yetkilendirmek iÃ§in kullanÄ±lÄ±r ve bot kullanÄ±cÄ±sÄ±nÄ±n izinlerini taÅŸÄ±r, bu da onlarÄ± *son derece hassas* hÃ¢le getirir. Token'Ä±nÄ± *asla* paylaÅŸmadÄ±ÄŸÄ±ndan veya herhangi bir versiyon kontrol sisteminde kontrol etmediÄŸinden emin ol.

Åimdi token'Ä± kopyala ve onu Ã¶rneÄŸin parola yÃ¶neticisi gibi gÃ¼venli bir yerde sakla.

> warn
> Token'Ä±nÄ± yeniden oluÅŸturmadÄ±ÄŸÄ±n sÃ¼rece tekrar gÃ¶rÃ¼ntÃ¼leyemezsin, bu nedenle gÃ¼venli bir yerde sakladÄ±ÄŸÄ±ndan emin ol.

### Bot izinlerini ve kapsamlarÄ±nÄ± ekleme

Uygulamalar, Discord'da eÄŸik Ã§izgi komutu oluÅŸturmak veya sunucu Ã¼yelerinin listesini almak gibi eylemler gerÃ§ekleÅŸtirmek iÃ§in yÃ¼kleme yapan kullanÄ±cÄ±larÄ±n onayÄ±na ihtiyaÃ§ duyar. UygulamayÄ± yÃ¼klemeden Ã¶nce istek atÄ±lacak birkaÃ§ kapsam ve izin seÃ§elim.

<Collapsible title="Kapsamlar ve izinler nelerdir?" description="Kapsamlara ve bot izinlerine giriÅŸ" icon="question">
Kapsamlar ve izinler, bir uygulama oluÅŸtururken uygulamanÄ±n Discord sunucularÄ±nda neler yapabileceÄŸini ve nelere eriÅŸebileceÄŸini belirler.

- [OAuth2 KapsamlarÄ±](#DOCS_TOPICS_OAUTH2/shared-resources-oauth2-scopes), uygulamanÄ±n yÃ¼kleme yapan veya yetki veren bir kullanÄ±cÄ± adÄ±na hangi verilere eriÅŸebileceÄŸini ve eylemleri gerÃ§ekleÅŸtirebileceÄŸini belirler.
- [Ä°zinler](#DOCS_TOPICS_PERMISSIONS/permission-overwrites), Discord'daki diÄŸer kullanÄ±cÄ±larÄ±n sahip olduÄŸu gibi bot kullanÄ±cÄ±ya verilmiÅŸ detaylÄ± izinlerdir. Bunlar, yÃ¼kleyen kullanÄ±cÄ± tarafÄ±ndan onaylanabilir veya daha sonra sunucu ayarlarÄ±nda veya [izinlerin Ã¼zerine yazarak](#DOCS_TOPICS_PERMISSIONS/permission-overwrites) gÃ¼ncellenebilir.
</Collapsible>

Sol kenar Ã§ubuÄŸunda **OAuth2**'ye tÄ±kla, ardÄ±ndan **URL oluÅŸturucuyu** seÃ§.

> info
> URL oluÅŸturucu, uygulaman iÃ§in seÃ§tiÄŸin kapsamlara ve izinlere gÃ¶re bir yÃ¼kleme baÄŸlantÄ±sÄ± oluÅŸturur. BaÄŸlantÄ±yÄ±, uygulamayÄ± kendi sunucuna yÃ¼klemek iÃ§in kullanabilir veya yÃ¼kleyebilmeleri iÃ§in baÅŸkalarÄ±yla paylaÅŸabilirsin.

Åimdilik iki kapsam ekleyelim:
- `applications.commands`, uygulamanÄ±n [komutlar](#DOCS_INTERACTIONS_APPLICATION_COMMANDS) oluÅŸturmasÄ±nÄ± saÄŸlar.
- `bot`, bot kullanÄ±cÄ±nÄ± ekler. `bot`'u seÃ§tikten sonra botun iÃ§in farklÄ± izinler de seÃ§ebilirsin. Åimdilik sadece **Mesaj GÃ¶nder** seÃ§eneÄŸini iÅŸaretleyelim.

DokÃ¼mantasyonda tÃ¼m [OAuth2 kapsamlarÄ±nÄ±n](#DOCS_TOPICS_OAUTH2/shared-resources-oauth2-scopes) bir listesine bakabilir veya [izinler](#DOCS_TOPICS_PERMISSIONS) hakkÄ±nda daha fazla bilgi edinebilirsin.

### UygulamanÄ± yÃ¼klemek

KapsamlarÄ± ekledikten sonra uygulamanÄ± yÃ¼klemek iÃ§in kopyalayabileceÄŸin bir URL gÃ¶receksin.

![URL oluÅŸturucu ekran gÃ¶rÃ¼ntÃ¼sÃ¼](url-generator.png)

> info
> Uygulama geliÅŸtirirken uygulamanÄ± baÅŸkalarÄ± tarafÄ±ndan aktif olarak kullanÄ±lmayan bir sunucuda oluÅŸturmalÄ± ve test etmelisin. HÃ¢lihazÄ±rda kendi sunucun yoksa [Ã¼cretsiz bir tane oluÅŸturabilirsin](https://support.discord.com/hc/articles/204849977-How-do-I-create-a-server-).

URL'yi yukarÄ±dan kopyala ve tarayÄ±cÄ±na yapÄ±ÅŸtÄ±r. Kurulum sÃ¼reci sana rehberlik edecektir; bu sÃ¼reÃ§te uygulamanÄ± geliÅŸtirebileceÄŸin ve test edebileceÄŸin bir sunucuya yÃ¼klediÄŸinden emin olmalÄ±sÄ±n.

UygulamanÄ± yÃ¼kledikten sonra sunucuna gidebilir ve uygulamanÄ±n sunucuna katÄ±ldÄ±ÄŸÄ±nÄ± gÃ¶rebilirsin âœ¨

Hadi yapÄ±landÄ±rÄ±lmÄ±ÅŸ ve yÃ¼klenmiÅŸ uygulamanÄ± geliÅŸtirelim.

---

## AdÄ±m 2: UygulamanÄ± Ã§alÄ±ÅŸtÄ±rmak

Ã–rnek uygulamada kullanÄ±lan tÃ¼m kodlar [GitHub deposunda](https://github.com/discord/discord-example-app) bulunabilir.

Uygulama, geliÅŸtirmeyi daha basit hÃ¢le getirmek iÃ§in tipler ve yardÄ±mcÄ± fonksiyonlar saÄŸlayan [discord-interactions](https://github.com/discord/discord-interactions-js) kullanÄ±r. BaÅŸka dilleri veya kÃ¼tÃ¼phaneleri kullanmayÄ± tercih ediyorsan [Topluluk KaynaklarÄ±](#DOCS_TOPICS_COMMUNITY_RESOURCES) dokÃ¼mantasyonlarÄ±na gÃ¶z atabilirsin.

### Projeyi remikslemek

Bu rehber, tarayÄ±cÄ±nda klonlama ve geliÅŸtirme yapmanÄ± saÄŸlayan Glitch'i kullanÄ±r. UygulamanÄ± yerel olarak geliÅŸtirmeyi tercih edersen, [README](https://github.com/discord/discord-example-app#running-app-locally) dosyasÄ±ndan ngrok kullanÄ±mÄ±yla ilgili talimatlara ulaÅŸabilirsin.

> info
> Glitch, geliÅŸtirme ve test iÃ§in harika olsa da [teknik kÄ±sÄ±tlamalara sahiptir](https://help.glitch.com/hc/en-us/articles/16287495313293-Technical-Restrictions/), bu nedenle bitmiÅŸ uygulamalar iÃ§in diÄŸer barÄ±ndÄ±rma saÄŸlayÄ±cÄ±larÄ± dÃ¼ÅŸÃ¼nmekte fayda vardÄ±r.

BaÅŸlamak iÃ§in **[Glitch projesini ğŸ remixle (veya klonla)](https://glitch.com/edit/#!/import/git?url=https://github.com/discord/discord-example-app.git)**.

Projeyi remikslediÄŸinde yeni bir Glitch projesine ulaÅŸacaksÄ±n.

<Collapsible title="Glitch proje arayÃ¼zÃ¼" description="Glitch'in proje arayÃ¼zÃ¼ne genel bakÄ±ÅŸ" icon="view">
![Glitch projesine genel bakÄ±ÅŸ](glitch-project.png)

- **Proje ismin**, projenin sol Ã¼st kÃ¶ÅŸesinde gÃ¶rÃ¼nen benzersiz ismidir
- **`.env`**, uygulaman iÃ§in tÃ¼m kimlik bilgilerinin saklanacaÄŸÄ± dosyadÄ±r
- **Loglar**, projenin Ã§Ä±ktÄ±sÄ±nÄ±n bulabileceÄŸin dosyalardÄ±r; uygulamanÄ±n Ã§alÄ±ÅŸÄ±p Ã§alÄ±ÅŸmadÄ±ÄŸÄ±nÄ± gÃ¶rmek veya uygulamanÄ±n karÅŸÄ±laÅŸtÄ±ÄŸÄ± hatalar hakkÄ±nda bilgi almak iÃ§in yararlÄ±dÄ±r
- SaÄŸ Ã¼st kÃ¶ÅŸedeki **PaylaÅŸ** butonu, bu rehberin ilerleyen bÃ¶lÃ¼mlerinde etkileÅŸimi ayarlamak iÃ§in ihtiyaÃ§ duyacaÄŸÄ±n canlÄ± proje URL'sini bulacaÄŸÄ±n yerdir
</Collapsible>

#### Proje yapÄ±sÄ±

Projenin tÃ¼m dosyalarÄ± Glitch projenin sol tarafÄ±nda bulunmaktadÄ±r. AÅŸaÄŸÄ±daki gÃ¶rselde ana klasÃ¶rlere ve dosyalara genel bir bakÄ±ÅŸ mevcut:

```
â”œâ”€â”€ examples    -> kÄ±sa, Ã¶zelliklere has Ã¶rnek uygulamalar
â”‚   â”œâ”€â”€ app.js  -> bitmiÅŸ app.js kodu
â”‚   â”œâ”€â”€ button.js
â”‚   â”œâ”€â”€ command.js
â”‚   â”œâ”€â”€ modal.js
â”‚   â”œâ”€â”€ selectMenu.js
â”œâ”€â”€ .env        -> kimlik bilgilerin ve kimliklerin
â”œâ”€â”€ app.js      -> uygulaman iÃ§in ana giriÅŸ noktasÄ±
â”œâ”€â”€ commands.js -> eÄŸik Ã§izgi komutlarÄ± payload'larÄ± (yÃ¼kler) ve yardÄ±mcÄ±lar
â”œâ”€â”€ game.js     -> TaÅŸ-kÃ¢ÄŸÄ±t-makas iÃ§in Ã¶zel mantÄ±k
â”œâ”€â”€ utils.js    -> yardÄ±mcÄ± fonksiyonlar ve enum'lar
â”œâ”€â”€ package.json
â”œâ”€â”€ README.md
â””â”€â”€ .gitignore
```

### Kimlik bilgilerini eklemek

`app.js` dosyanda zaten bazÄ± kodlar var ancak istekte bulunmak iÃ§in uygulamanÄ±n token'Ä±na ve kimliÄŸine ihtiyacÄ±n olacak. TÃ¼m kimlik bilgilerin doÄŸrudan `.env` dosyasÄ±nda saklanabilir.

Ä°lk olarak, Ã¶nceden oluÅŸturduÄŸumuz bot kullanÄ±cÄ±sÄ±nÄ±n token'Ä±nÄ± kopyala ve `.env` dosyandaki **`DISCORD_TOKEN`** deÄŸiÅŸkenine yapÄ±ÅŸtÄ±r.

ArdÄ±ndan uygulamanÄ±n **Genel BakÄ±ÅŸ** sayfasÄ±na git, sonrasÄ±nda **Uygulama KimliÄŸini** ve **Ortak AnahtarÄ±** kopyala. DeÄŸerleri `.env` dosyana **`APP_ID`** ve **`PUBLIC_KEY`** olarak yapÄ±ÅŸtÄ±r.

Kimlik bilgilerin yapÄ±landÄ±rÄ±ldÄ±ktan sonra eÄŸik Ã§izgi komutlarÄ±nÄ± yÃ¼kleyelim ve iÅŸleyelim.

### EÄŸik Ã§izgi komutlarÄ±nÄ± yÃ¼kleme

> info
> EÄŸik Ã§izgi komutlarÄ±nÄ± yÃ¼klemek iÃ§in uygulama [`node-fetch`](https://github.com/node-fetch/node-fetch) kullanÄ±r. YÃ¼kleme implementasyonunu `utils.js`'de `DiscordRequest()` fonksiyonu iÃ§inde gÃ¶rebilirsin.

Proje, `commands.js` dosyasÄ±nÄ±n altÄ±nda tanÄ±mlanan `ALL_COMMANDS` iÃ§erisindeki komutlarÄ± yÃ¼klemek iÃ§in kullanabileceÄŸin bir `register` komut dosyasÄ± iÃ§erir. HTTP API'sinin [`PUT /applications/<APP_ID>/commands`](#DOCS_INTERACTIONS_APPLICATION_COMMANDS/bulk-overwrite-global-application-commands) uÃ§ noktasÄ±nÄ± Ã§aÄŸÄ±rarak komutlarÄ± global komutlar olarak yÃ¼kler.

KomutlarÄ±nÄ± Ã¶zelleÅŸtirmek veya ilave komutlar eklemek istersen [komutlar dokÃ¼mantasyonundaki](#DOCS_INTERACTIONS_APPLICATION_COMMANDS/application-command-object-application-command-structure) komut yapÄ±sÄ±na baÅŸvurabilirsin.

Glitch projenin altÄ±ndaki **Terminal**'e tÄ±klayarak ve aÅŸaÄŸÄ±daki komutu yapÄ±ÅŸtÄ±rarak `register` komut dosyasÄ±nÄ± Ã§alÄ±ÅŸtÄ±r:

```
npm run register
```

Komutu Ã§alÄ±ÅŸtÄ±rmak iÃ§in enter tuÅŸuna bas.

Sunucuna geri dÃ¶ndÃ¼ÄŸÃ¼nde eÄŸik Ã§izgi komutlarÄ±nÄ±n gÃ¶rÃ¼ndÃ¼ÄŸÃ¼nÃ¼ gÃ¶receksin. Ancak bunlarÄ± Ã§alÄ±ÅŸtÄ±rmayÄ± denersen uygulaman Discord'dan herhangi bir istek almadÄ±ÄŸÄ± veya iÅŸlemediÄŸi iÃ§in hiÃ§bir ÅŸey olmayacaktÄ±r.

<Collapsible title="Discord'un API'leri nelerdir?" description="Discord'un HTTP ve AÄŸ GeÃ§idi API'lerine Genel BakÄ±ÅŸ" icon="question">
Discord, uygulamalar oluÅŸturmak iÃ§in bir araya getirebileceÄŸin iki API'ye sahiptir:

- **[HTTP API](#DOCS_REFERENCE/http-api)**, Discord'da veri gÃ¶nderme, veri gÃ¼ncelleme veya bir kaynak hakkÄ±nda veri alma gibi genel iÅŸlemler iÃ§in kullanÄ±lan REST benzeri bir API'dir.
- **[AÄŸ GeÃ§idi API](#DOCS_REFERENCE/gateway-websocket-api)**, durumu korumak veya Discord sunucusunda gerÃ§ekleÅŸen olaylarÄ± dinlemek iÃ§in yararlÄ±, WebSocket tabanlÄ± bir API'dir. Bu rehberde bunu kullanmayacaÄŸÄ±z ancak bir AÄŸ GeÃ§idi baÄŸlantÄ±sÄ±nÄ±n nasÄ±l oluÅŸturulacaÄŸÄ± hakkÄ±nda ve dinleyebileceÄŸin farklÄ± olaylar hakkÄ±nda daha fazla bilgi [AÄŸ GeÃ§idi dokÃ¼mantasyonunda](#DOCS_TOPICS_GATEWAY) bulunmaktadÄ±r.
</Collapsible>

---

## AdÄ±m 3: EtkileÅŸimi iÅŸlemek

UygulamanÄ±n eÄŸik Ã§izgi komut isteklerini (ve diÄŸer etkileÅŸimleri) almasÄ±nÄ± saÄŸlamak iÃ§in Discord'un bunlarÄ± gÃ¶ndermek Ã¼zere genel bir URL'ye ihtiyacÄ± vardÄ±r. Bu URL, uygulamanÄ±n ayarlarÄ±nda **EtkileÅŸim UÃ§ NoktasÄ± URL'si** olarak yapÄ±landÄ±rÄ±labilir.

### EtkileÅŸim uÃ§ noktasÄ± URL'si ekleme

Glitch projeleri varsayÄ±lan olarak herkese aÃ§Ä±k bir URL'ye sahiptir. SaÄŸ Ã¼st kÃ¶ÅŸedeki **PaylaÅŸ** butonuna tÄ±klayarak projenin URL'sini kopyala, ardÄ±ndan minik pencerenin alt kÄ±smÄ±ndaki "CanlÄ± site" proje baÄŸlantÄ±sÄ±nÄ± kopyala.

> info
> Yerel olarak geliÅŸtirme yapÄ±yorsan, [GitHub README'de](https://github.com/discord/discord-example-app#running-app-locally) istekleri yerel ortamÄ±na tÃ¼nellemek iÃ§in talimatlara ulaÅŸabilirsin.

BaÄŸlantÄ± kopyalandÄ±ktan sonra [geliÅŸtirici portalÄ±ndan](https://discord.com/developers/applications) uygulamanÄ±n ayarlarÄ±na git.

UygulamanÄ±n **Genel Bilgiler** sayfasÄ±nda, uygulamanÄ±n URL'sini yapÄ±ÅŸtÄ±rabileceÄŸin ve iÃ§erisine `/interactions` ekleyebileceÄŸin bir **EtkileÅŸimli UÃ§ Nokta URL'si** seÃ§eneÄŸi vardÄ±r. Express uygulamasÄ±nÄ±n istekleri dinlemek iÃ§in yapÄ±landÄ±rÄ±ldÄ±ÄŸÄ± yer de bu EtkileÅŸimli UÃ§ Nokta URL'sidir.

![Uygulama ayarlarÄ±nda etkileÅŸimler uÃ§ nokta URL'si](interactions-url.png)

**DeÄŸiÅŸiklikleri Kaydet**'e tÄ±kla ve uÃ§ noktanÄ±n baÅŸarÄ±yla doÄŸrulandÄ±ÄŸÄ±ndan emin ol.

Ã–rnek uygulama, doÄŸrulamayÄ± iki ÅŸekilde ele alÄ±r:
- `PUBLIC_KEY` ve [discord-interactions paketini](https://github.com/discord/discord-interactions-js#usage) [Express'in `verify` arayÃ¼zÃ¼ne](http://expressjs.com/en/5x/api.html#express.json) uygun hÃ¢le getiren bir wrapper fonksiyonla (`utils.js` iÃ§erisinden iÃ§e aktarÄ±lÄ±r) birlikte kullanÄ±r. Bu, uygulamana gelen her istekte Ã§alÄ±ÅŸtÄ±rÄ±lÄ±r.
- Gelen `PING` isteklerine yanÄ±t verir.

UygulamanÄ± etkileÅŸim almaya hazÄ±rlama hakkÄ±nda daha fazla bilgiyi [etkileÅŸimler dokÃ¼mantasyonunda](#DOCS_INTERACTIONS_RECEIVING_AND_RESPONDING/receiving-an-interaction) bulabilirsin.

### EÄŸik Ã§izgi komut isteklerini iÅŸleme

UÃ§ nokta doÄŸrulandÄ±ktan sonra projenin `app.js` dosyasÄ±na git ve `/test` komutunu iÅŸleyen kod blokunu bul:

```javascript
// "test" komutu
if (name === 'test') {
    // Komutun tetiklendiÄŸi kanala bir mesaj gÃ¶nderir
    return res.send({
    type: InteractionResponseType.CHANNEL_MESSAGE_WITH_SOURCE,
    data: {
        // Bir yardÄ±mcÄ± fonksiyondan gÃ¶ndermek iÃ§in rastgele bir emoji alÄ±r
        content: 'hello world ' + getRandomEmoji(),
    },
    });
}
```

YukarÄ±daki kod, gelen etkileÅŸime meydana geldiÄŸi kanaldaki bir mesajla yanÄ±t veriyor. Modal ile yanÄ±t vermek gibi mevcut tÃ¼m yanÄ±t tÃ¼rlerini [dokÃ¼mantasyonda](#DOCS_INTERACTIONS_RECEIVING_AND_RESPONDING/interaction-response-object-interaction-callback-type) bulabilirsin.

> info
> `InteractionResponseType.CHANNEL_MESSAGE_WITH_SOURCE`, [`discord-interactions`'dan dÄ±ÅŸa aktarÄ±lmÄ±ÅŸ](https://github.com/discord/discord-interactions-js/blob/main/src/index.ts#L33) bir sabittir.

Sunucuna git ve uygulamanÄ±n `/test` eÄŸik Ã§izgi komutunun Ã§alÄ±ÅŸtÄ±ÄŸÄ±ndan emin ol. Bunu tetiklediÄŸinde, uygulaman "hello world" kelimelerini takip eden rastgele bir emoji iÃ§eren bir mesaj gÃ¶ndermelidir.

AÅŸaÄŸÄ±daki bÃ¶lÃ¼mde, taÅŸ-kÃ¢ÄŸÄ±t-makas oyununu oluÅŸturmak iÃ§in eÄŸik Ã§izgi komut seÃ§eneklerini, butonlarÄ± ve seÃ§me menÃ¼lerini kullanan ek bir komut ekleyeceÄŸiz.

---

## AdÄ±m 4: Mesaj bileÅŸenlerini ekleme

TaÅŸ-kÃ¢ÄŸÄ±t-makas tarzÄ± oyunumuz `/challenge` komutuyla baÅŸlatÄ±lacaktÄ±r. Komut tetiklendiÄŸinde uygulama kanala mesaj bileÅŸenleri gÃ¶nderecek ve bu da kullanÄ±cÄ±larÄ± oyunu tamamlamalarÄ± iÃ§in yÃ¶nlendirecektir.

### SeÃ§enekli bir komut ekleme

`commands.js`'de `CHALLENGE_COMMAND` olarak adlandÄ±rÄ±lan `/challenge` komutu bir dizi `options`'a sahiptir. UygulamamÄ±zda seÃ§enekler, kullanÄ±cÄ±nÄ±n taÅŸ-kÃ¢ÄŸÄ±t-makas oynarken seÃ§ebileceÄŸi farklÄ± ÅŸeyleri temsil eden nesnelerdir ve `game.js`'deki `RPSChoices` anahtarlarÄ± kullanÄ±larak oluÅŸturulmuÅŸtur.

Komut seÃ§enekleri ve bunlarÄ±n yapÄ±sÄ± hakkÄ±nda daha fazla bilgiyi [dokÃ¼mantasyonlardan](#DOCS_INTERACTIONS_APPLICATION_COMMANDS/application-command-object-application-command-option-structure) edinebilirsin.

> info
> Bu rehber `game.js` dosyasÄ±na fazla deÄŸinmeyecek olsa da sen onu kurcalayabilir, komutlarÄ± veya komutlardaki seÃ§enekleri Ã§ekinmeden deÄŸiÅŸtirebilirsin.

<Collapsible title="Komut etkileÅŸiminin iÅŸlenmesi" description="Meydan okuma komutunun iÅŸlenmesi ve bir buton iÃ§eren bir mesajla yanÄ±t verilmesi iÃ§in kod" icon="code" open>

`/challenge` komutunu iÅŸlemek iÃ§in `if name === â€œtestâ€` if blokundan sonra aÅŸaÄŸÄ±daki kodu ekle:

```javascript
// "meydanoku" komutu
if (name === 'challenge' && id) {
    const userId = req.body.member.user.id;
    // KullanÄ±cÄ±nÄ±n nesne seÃ§imi
    const objectName = req.body.data.options[0].value;

    // Oyun kimliÄŸi olarak mesaj kimliÄŸini kullanarak aktif oyun oluÅŸturur
    activeGames[id] = {
        id: userId,
        objectName,
    };

    return res.send({
    type: InteractionResponseType.CHANNEL_MESSAGE_WITH_SOURCE,
    data: {
        content: `Rock papers scissors challenge from <@${userId}>`,
        components: [
        {
            type: MessageComponentTypes.ACTION_ROW,
            components: [
            {
                type: MessageComponentTypes.BUTTON,
                // Daha sonra kullanmak Ã¼zere oyun kimliÄŸini ekler
                custom_id: `accept_button_${req.body.id}`,
                label: 'Accept',
                style: ButtonStyleTypes.PRIMARY,
            },
            ],
        },
        ],
    },
    });
}
```


> info
> Kodu nereye yapÄ±ÅŸtÄ±racaÄŸÄ±ndan emin deÄŸilsen, kodun tamamÄ±nÄ± Glitch projesindeki `examples/app.js` dosyasÄ±nda veya [GitHub'daki](https://github.com/discord/discord-example-app/blob/main/app.js) kÃ¶k `app.js` dosyasÄ±nda bulabilirsin.

YukarÄ±daki kod birkaÃ§ ÅŸey yapÄ±yor:
1. EÄŸik Ã§izgi komutunu tetikleyen kullanÄ±cÄ±nÄ±n kimliÄŸini (`userId`) ve seÃ§tiÄŸi (`objectName`) seÃ§eneÄŸi (nesne seÃ§imi) almak iÃ§in istek gÃ¶vdesini ayrÄ±ÅŸtÄ±rÄ±r.
2. EtkileÅŸim kimliÄŸini kullanarak `activeGames` nesnesine yeni bir oyun ekler. Etkin oyun `userId` ve `objectName`'i kaydeder.
3. Kanala, `custom_id`'si `accept_button_<SOME_ID>` olan bir buton ile bir mesaj gÃ¶nderir.

> warn
> Ã–rnek kod, bellek iÃ§i depolama alanÄ± olarak bir nesne kullanÄ±r ancak bitmiÅŸ uygulamalar iÃ§in bir veri tabanÄ± kullanman gerekir.

[Mesaj bileÅŸenleriyle](#DOCS_INTERACTIONS_MESSAGE_COMPONENTS/what-is-a-component) bir mesaj gÃ¶nderirken, tekil payload'lar bir `components` dizisine eklenir. Eyleme geÃ§irilebilir bileÅŸenlerin (butonlar gibi) kod Ã¶rneÄŸinde gÃ¶rebileceÄŸin bir [eylem satÄ±rÄ±nÄ±n](#DOCS_INTERACTIONS_MESSAGE_COMPONENTS/action-rows) iÃ§inde olmasÄ± gereklidir.

Mesaj bileÅŸenleriyle birlikte gÃ¶nderilen benzersiz `custom_id`'ye dikkatli bakalÄ±m. Åu anki durumda `accept_button_` aktif oyunun kimliÄŸiyle birlikte eklendi. Bir `custom_id`, birisi bileÅŸenle etkileÅŸime girdiÄŸinde Discord'un sana gÃ¶nderdiÄŸi istekleri iÅŸlemek iÃ§in kullanÄ±labilir, bunu birazdan gÃ¶receÄŸiz.

ArtÄ±k `/challenge` komutunu Ã§alÄ±ÅŸtÄ±rdÄ±ÄŸÄ±nda ve bir seÃ§enek belirlediÄŸinde, uygulaman bir **Kabul Et** butonu iÃ§eren bir mesaj gÃ¶nderecektir. Butona basmayÄ± iÅŸlemek iÃ§in kod ekleyelim.

</Collapsible>

<Collapsible title="Buton etkileÅŸimlerinin iÅŸlenmesi" description="Buton tÄ±klamalarÄ±nÄ± iÅŸlemek ve geÃ§ici bir mesajla yanÄ±t vermek iÃ§in kod" icon="code" open>

KullanÄ±cÄ±lar bir mesaj bileÅŸeniyle etkileÅŸime girdiÄŸinde, Discord [etkileÅŸim tÃ¼rÃ¼](#DOCS_INTERACTIONS_RECEIVING_AND_RESPONDING/interaction-object-interaction-type) `3` (veya `discord-interactions` kullanÄ±lÄ±rken `MESSAGE_COMPONENT`) deÄŸeri olan bir istek gÃ¶nderecektir.

Buton iÃ§in bir iÅŸleyici ayarlamak Ã¼zere, etkileÅŸimin `type`'Ä±nÄ± kontrol edeceÄŸiz ve ardÄ±ndan `custom_id` ile eÅŸleÅŸtireceÄŸiz.

AÅŸaÄŸÄ±daki kodu `APPLICATION_COMMAND` iÃ§in tip iÅŸleyicisinin altÄ±na yapÄ±ÅŸtÄ±r:

```javascript
if (type === InteractionType.MESSAGE_COMPONENT) {
// custom_id mesaj bileÅŸeni gÃ¶nderilirken payload'da ayarlanÄ±r
const componentId = data.custom_id;

  if (componentId.startsWith('accept_button_')) {
    // iliÅŸkili oyun kimliÄŸini alÄ±r
    const gameId = componentId.replace('accept_button_', '');
    // Ä°stek gÃ¶vdesinde token bulunan mesajÄ± siler
    const endpoint = `webhooks/${process.env.APP_ID}/${req.body.token}/messages/${req.body.message.id}`;
    try {
      await res.send({
        type: InteractionResponseType.CHANNEL_MESSAGE_WITH_SOURCE,
        data: {
          // Bir yardÄ±mcÄ± fonksiyondan gÃ¶ndermek iÃ§in rastgele bir emoji alÄ±r
          content: 'What is your object of choice?',
          // GeÃ§ici bir mesaj olacaÄŸÄ±nÄ± belirtir
          flags: InteractionResponseFlags.EPHEMERAL,
          components: [
            {
              type: MessageComponentTypes.ACTION_ROW,
              components: [
                {
                  type: MessageComponentTypes.STRING_SELECT,
                  // Oyun kimliÄŸini ekler
                  custom_id: `select_choice_${gameId}`,
                  options: getShuffledOptions(),
                },
              ],
            },
          ],
        },
      });
      // Ã–nceki mesajÄ± siler
      await DiscordRequest(endpoint, { method: 'DELETE' });
    } catch (err) {
      console.error('Error sending message:', err);
    }
  }
}
```

YukarÄ±daki kod:
1. BaÅŸlangÄ±Ã§ta gÃ¶nderdiÄŸimizle eÅŸleÅŸen bir `custom_id` olup olmadÄ±ÄŸÄ±nÄ± kontrol eder (bu durumda, `accept_button_` ile baÅŸlar). Ã–zel kimliÄŸe aktif oyun kimliÄŸi de eklenmiÅŸtir, bu yÃ¼zden bunu `gameID`'de saklarÄ±z.
2. `node-fetch` kullanarak bir webhook Ã§aÄŸÄ±ran ve istek gÃ¶vdesinde benzersiz etkileÅŸim `token`'Ä± ileten [orijinal mesajÄ± siler](#DOCS_INTERACTIONS_RECEIVING_AND_RESPONDING/delete-original-interaction-response). Bu, kanalÄ± temizlemek iÃ§in yapÄ±lÄ±r ve bÃ¶ylece diÄŸer kullanÄ±cÄ±lar butona tÄ±klayamaz.
3. Oyun iÃ§in nesne seÃ§eneklerini iÃ§eren bir seÃ§im menÃ¼sÃ¼ iÃ§eren bir mesaj gÃ¶ndererek isteÄŸe yanÄ±t verir. Payload, `options` dizisi ve [mesajÄ±n geÃ§ici olduÄŸunu gÃ¶steren](#DOCS_INTERACTIONS_RECEIVING_AND_RESPONDING/create-followup-message) `flags: 64` belirteci haricinde Ã¶nceki payload'a epey benzer gÃ¶rÃ¼nmelidir.

`options` dizisi, `game.js`'deki `getShuffledOptions()` metodu kullanÄ±larak doldurulur ve bu metot `RPSChoices` deÄŸerlerini [mesaj bileÅŸeni seÃ§eneklerinin](#DOCS_INTERACTIONS_MESSAGE_COMPONENTS/select-menu-object-select-option-structure) ÅŸekline uyacak ÅŸekilde deÄŸiÅŸtirir.

</Collapsible>

<Collapsible title="SeÃ§im menÃ¼sÃ¼ etkileÅŸimlerinin iÅŸlenmesi" description="SeÃ§im menÃ¼sÃ¼ etkileÅŸimlerine yanÄ±t vermek ve oyun durumunu gÃ¼ncellemek iÃ§in kod" icon="code" open>

Eklenecek son ÅŸey, seÃ§im menÃ¼sÃ¼ etkileÅŸimlerini iÅŸleyecek ve oyunun sonucunu kanala gÃ¶nderecek koddur.

SeÃ§im menÃ¼leri sadece baÅŸka bir mesaj bileÅŸeni olduÄŸundan, etkileÅŸimlerini iÅŸleyen kod, buton kodlarÄ±nÄ±n neredeyse aynÄ±sÄ± olacaktÄ±r.

SeÃ§im menÃ¼sÃ¼nÃ¼ iÅŸlemek iÃ§in yukarÄ±daki kodu deÄŸiÅŸtir:

```javascript
if (type === InteractionType.MESSAGE_COMPONENT) {
// custom_id mesaj bileÅŸeni gÃ¶nderilirken payload'da ayarlanÄ±r
const componentId = data.custom_id;

  if (componentId.startsWith('accept_button_')) {
    // iliÅŸkili oyun kimliÄŸini alÄ±r
    const gameId = componentId.replace('accept_button_', '');
    // Ä°stek gÃ¶vdesinde token bulunan mesajÄ± siler
    const endpoint = `webhooks/${process.env.APP_ID}/${req.body.token}/messages/${req.body.message.id}`;
    try {
      await res.send({
        type: InteractionResponseType.CHANNEL_MESSAGE_WITH_SOURCE,
        data: {
          // Bir yardÄ±mcÄ± fonksiyondan gÃ¶ndermek iÃ§in rastgele bir emoji alÄ±r
          content: 'What is your object of choice?',
          // GeÃ§ici bir mesaj olacaÄŸÄ±nÄ± belirtir
          flags: InteractionResponseFlags.EPHEMERAL,
          components: [
            {
              type: MessageComponentTypes.ACTION_ROW,
              components: [
                {
                  type: MessageComponentTypes.STRING_SELECT,
                  // Oyun kimliÄŸini ekler
                  custom_id: `select_choice_${gameId}`,
                  options: getShuffledOptions(),
                },
              ],
            },
          ],
        },
      });
      // Ã–nceki mesajÄ± siler
      await DiscordRequest(endpoint, { method: 'DELETE' });
    } catch (err) {
      console.error('Error sending message:', err);
    }
  } else if (componentId.startsWith('select_choice_')) {
    // iliÅŸkili oyun kimliÄŸini alÄ±r
    const gameId = componentId.replace('select_choice_', '');

    if (activeGames[gameId]) {
      // YanÄ±t veren kullanÄ±cÄ± iÃ§in kullanÄ±cÄ± kimliÄŸini ve nesne seÃ§imini alÄ±r
      const userId = req.body.member.user.id;
      const objectName = data.values[0];
      // YardÄ±mcÄ± fonksiyondan gelen sonucu hesaplar
      const resultStr = getResult(activeGames[gameId], {
        id: userId,
        objectName,
      });

      // Oyunu bellekten kaldÄ±rÄ±r
      delete activeGames[gameId];
      // MesajÄ± istek gÃ¶vdesinde token ile gÃ¼nceller
      const endpoint = `webhooks/${process.env.APP_ID}/${req.body.token}/messages/${req.body.message.id}`;

      try {
        // SonuÃ§larÄ± gÃ¶nderir
        await res.send({
          type: InteractionResponseType.CHANNEL_MESSAGE_WITH_SOURCE,
          data: { content: resultStr },
        });
        // GeÃ§ici mesajÄ± gÃ¼nceller
        await DiscordRequest(endpoint, {
          method: 'PATCH',
          body: {
            content: 'Nice choice ' + getRandomEmoji(),
            components: []
          }
        });
      } catch (err) {
        console.error('Error sending message:', err);
      }
    }
  }
}
```

Daha Ã¶nceki koda benzer ÅŸekilde, yukarÄ±daki kod etkileÅŸim isteÄŸinden kullanÄ±cÄ± kimliÄŸini ve nesne seÃ§imini alÄ±r.

Bu bilgi, orijinal kullanÄ±cÄ±nÄ±n kimliÄŸi ve `activeGames` nesnesinden yapÄ±lan seÃ§imle birlikte `getResult()` fonksiyonuna aktarÄ±lÄ±r. `getResult()` kazananÄ± belirler, ardÄ±ndan kanala geri gÃ¶ndermek iÃ§in okunabilir bir karakter dizisi oluÅŸturur.

AyrÄ±ca, bu kez silinemediÄŸi iÃ§in [takip eden geÃ§ici mesajÄ± gÃ¼ncellemek](#DOCS_INTERACTIONS_RECEIVING_AND_RESPONDING/edit-followup-message) iÃ§in baÅŸka bir webhook Ã§aÄŸÄ±rÄ±yoruz.

Son olarak, sonuÃ§lar kanalda `CHANNEL_MESSAGE_WITH_SOURCE` etkileÅŸim yanÄ±t tipi kullanÄ±larak gÃ¶nderilir.

</Collapsible>

...iÅŸte bu kadar ğŸŠ Durma, uygulamanÄ± test et ve her ÅŸeyin Ã§alÄ±ÅŸtÄ±ÄŸÄ±ndan emin ol.

---

## Sonraki adÄ±mlar

Tebrikler, ilk Discord uygulamanÄ± geliÅŸtirdin! ğŸ¤–

UmarÄ±z Discord uygulamalarÄ±, nasÄ±l yapÄ±landÄ±rÄ±lacaklarÄ± ve nasÄ±l etkileÅŸimli hÃ¢le getirilecekleri hakkÄ±nda biraz bilgi edinmiÅŸsindir. Buradan uygulamanÄ± oluÅŸturmaya devam edebilir veya baÅŸka nelerin mÃ¼mkÃ¼n olduÄŸunu keÅŸfedebilirsin:
- API Ã¶zellikleri hakkÄ±nda derinlemesine bilgi iÃ§in **[dokÃ¼mantasyonlarÄ±](#DOCS_INTRO)** oku
- Daha kÃ¼Ã§Ã¼k, Ã¶zelliÄŸe has kod Ã¶rnekleri iÃ§in bu projedeki `examples/` klasÃ¶rÃ¼ne gÃ¶z at
- Topluluk Ã¼yeleri tarafÄ±ndan yÃ¼rÃ¼tÃ¼len kodlama diline Ã¶zgÃ¼ araÃ§lar iÃ§in **[topluluk kaynaklarÄ±na](#DOCS_TOPICS_COMMUNITY_RESOURCES)** gÃ¶z at
- Discord uygulamalarÄ±nÄ± [Cloudflare Workers](#DOCS_TUTORIALS_HOSTING_ON_CLOUDFLARE_WORKERS) Ã¼zerinde barÄ±ndÄ±rma hakkÄ±ndaki eÄŸitimimizi oku
- API hakkÄ±nda sorular sormak, Discord API ekibi tarafÄ±ndan dÃ¼zenlenen etkinliklere katÄ±lmak ve diÄŸer geliÅŸtiricilerle etkileÅŸim kurmak iÃ§in **[Discord GeliÅŸtiricileri sunucusuna](https://discord.gg/discord-developers)** katÄ±l
